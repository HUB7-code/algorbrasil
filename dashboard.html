<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Console do Membro - Algor Brasil</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            bg: '#1A120B',
                            panel: '#2C221E',
                            copper: '#B87333',
                            gold: '#E5C185',
                            text: '#F3E5DC',
                            black: '#000000',
                        }
                    },
                    fontFamily: {
                        orbitron: ['"Orbitron"', 'sans-serif'],
                        sans: ['"Inter"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0A0A0A;
            color: #F3E5DC;
            overflow-x: hidden;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .btn-glow:hover {
            box-shadow: 0 0 15px rgba(184, 115, 51, 0.5);
        }
    </style>
</head>

<body class="min-h-screen flex flex-col relative">

    <!-- Background (Dark & Clean) -->
    <div class="fixed inset-0 z-0 select-none pointer-events-none">
        <div class="absolute inset-0 bg-[#0A0A0A]"></div>
        <div class="absolute top-0 right-0 w-[600px] h-[600px] bg-brand-copper/5 rounded-full blur-[120px]"></div>
        <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-brand-gold/5 rounded-full blur-[100px]"></div>
    </div>

    <!-- Header / Navbar -->
    <header class="relative z-50 border-b border-white/5 bg-[#0A0A0A]/80 backdrop-blur-md">
        <div class="container mx-auto px-6 py-4 flex items-center justify-between">
            <a href="index.html" class="flex items-center gap-4 hover:opacity-80 transition-opacity"
                title="Voltar para Home">
                <img src="images/algor_association_logo_light.png" alt="Algor Logo"
                    class="h-20 md:h-28 w-auto opacity-100 filter drop-shadow-lg">
                <div class="h-10 w-px bg-white/10 hidden md:block"></div>
                <span class="font-orbitron font-bold text-brand-gold text-2xl tracking-wider hidden md:block">MEMBER
                    CONSOLE</span>
            </a>

            <div class="flex items-center gap-6">
                <div class="hidden md:flex flex-col items-end">
                    <span id="user-email" class="text-xs font-bold text-white uppercase tracking-wider">Membro</span>
                    <span class="text-[10px] text-green-500 font-bold flex items-center">
                        <span class="w-1.5 h-1.5 bg-green-500 rounded-full mr-1 animate-pulse"></span> ONLINE
                    </span>
                </div>
                <button id="logout-btn"
                    class="flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-brand-text hover:text-red-400 transition-colors border border-white/5"
                    title="Sair da Conta">
                    <span class="text-xs font-bold uppercase tracking-wider hidden sm:block">SAIR</span>
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                        </path>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="relative z-10 flex-1 container mx-auto px-6 py-12">

        <!-- Welcome Section -->
        <div class="mb-16">
            <h1 class="text-4xl md:text-5xl font-orbitron font-bold text-white mb-4">
                Olá, <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-brand-gold to-brand-copper">Estrategista</span>.
            </h1>
            <p class="text-brand-text/60 text-lg max-w-2xl">
                Bem-vindo ao centro de comando da Algor. Abaixo você encontra as ferramentas e recursos disponíveis para
                sua categoria de membro.
            </p>
        </div>

        <!-- Section 1: Lead Magnets (Acesso Rápido) -->
        <div class="mb-16">
            <h2 class="text-xs font-bold text-brand-copper uppercase tracking-[0.2em] mb-6 flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                </svg>
                Biblioteca de Recursos
            </h2>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- Resource 1 -->
                <div
                    class="glass-panel p-6 rounded-2xl hover:bg-white/5 transition-all group cursor-pointer relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity">
                        <svg class="w-20 h-20 text-brand-copper" fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z">
                            </path>
                        </svg>
                    </div>
                    <div class="relative z-10">
                        <span
                            class="px-2 py-1 rounded bg-brand-copper/10 text-brand-copper text-[10px] font-bold uppercase mb-3 inline-block">PDF
                            • Legislação</span>
                        <h3 class="text-xl font-orbitron font-bold text-white mb-2">Dossiê PL 2338</h3>
                        <p class="text-sm text-brand-text/50 mb-4 h-10 line-clamp-2">Análise comentada ponto-a-ponto do
                            Marco Legal da IA no Brasil.</p>
                        <button id="btn-dossie"
                            class="text-sm font-bold text-white group-hover:text-brand-copper transition-colors flex items-center">
                            Baixar Agora <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Resource 2 -->
                <div
                    class="glass-panel p-6 rounded-2xl hover:bg-white/5 transition-all group cursor-pointer relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity">
                        <svg class="w-20 h-20 text-brand-gold" fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z">
                            </path>
                        </svg>
                    </div>
                    <div class="relative z-10">
                        <span
                            class="px-2 py-1 rounded bg-brand-gold/10 text-brand-gold text-[10px] font-bold uppercase mb-3 inline-block">Playbook</span>
                        <h3 class="text-xl font-orbitron font-bold text-white mb-2">Governança Ágil</h3>
                        <p class="text-sm text-brand-text/50 mb-4 h-10 line-clamp-2">Guia prático para implementar
                            comitês de ética em 30 dias.</p>
                        <button id="btn-playbook"
                            class="text-sm font-bold text-white group-hover:text-brand-gold transition-colors flex items-center">
                            Baixar Agora <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Resource 3 -->
                <div
                    class="glass-panel p-6 rounded-2xl hover:bg-white/5 transition-all group cursor-pointer relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity">
                        <svg class="w-20 h-20 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div class="relative z-10">
                        <span
                            class="px-2 py-1 rounded bg-blue-500/10 text-blue-400 text-[10px] font-bold uppercase mb-3 inline-block">Ferramenta</span>
                        <h3 class="text-xl font-orbitron font-bold text-white mb-2">Mapa de Riscos (ISO)</h3>
                        <p class="text-sm text-brand-text/50 mb-4 h-10 line-clamp-2">Planilha automatizada para
                            classificação de riscos de sistemas de IA.</p>
                        <button id="btn-riscos"
                            class="text-sm font-bold text-white group-hover:text-blue-400 transition-colors flex items-center">
                            Baixar Planilha (Excel) <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4">
                                </path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 2: Tools & Actions -->
        <div class="grid md:grid-cols-2 gap-8">
            <!-- Maturidade -->
            <div class="border border-white/10 rounded-2xl p-8 bg-[#121212] relative overflow-hidden">
                <h3 class="text-xl font-orbitron font-bold text-white mb-2">Diagnóstico de Maturidade</h3>
                <p class="text-sm text-brand-text/60 mb-6">Continue seu processo de avaliação organizacional.</p>
                <div class="w-full bg-white/5 rounded-full h-2 mb-2">
                    <div class="bg-brand-copper h-2 rounded-full" style="width: 0%"></div>
                </div>
                <div class="flex justify-between text-xs text-brand-text/40 mb-6">
                    <span>Progresso</span>
                    <span>0%</span>
                </div>
                <button
                    onclick="alert('O Diagnóstico Digital automatizado está em fase final de calibração.\n\nPara agendar um Diagnóstico Assistido com nossos especialistas, entre em contato via WhatsApp ou Email.')"
                    class="w-full py-3 border border-brand-copper text-brand-copper font-bold text-sm hover:bg-brand-copper hover:text-white transition-all rounded-lg uppercase tracking-wider">
                    Iniciar Avaliação
                </button>
            </div>

            <!-- Certificados -->
            <div
                class="border border-white/10 rounded-2xl p-8 bg-[#121212] flex items-center justify-center flex-col text-center">
                <div class="w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4">
                    <svg class="w-8 h-8 text-brand-text/30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h3 class="text-white font-bold mb-1">Seus Certificados</h3>
                <p class="text-xs text-brand-text/50 max-w-xs mx-auto">Complete a Fase 1 (Diagnóstico) para desbloquear
                    seu Selo de Conformidade.</p>
            </div>
        </div>

    </main>

    <script type="module">
        import { AuthClient } from './js/auth-client.js';
        import { DownloadManager } from './js/downloads.js';

        // 1. Security Check
        AuthClient.checkAuth(true);

        const userEmailSpan = document.getElementById('user-email');
        const logoutBtn = document.getElementById('logout-btn');

        // 2. Set User Info
        const email = AuthClient.getUserEmail();
        const role = AuthClient.getUserRole(); // 'subscriber' | 'member' | 'admin'
        const username = AuthClient.getUserName();

        if (username) {
            userEmailSpan.textContent = username;
            document.title = `Console - ${username}`;
        } else if (email) {
            userEmailSpan.textContent = email;
        }

        // 3. Bloqueio de Features para Nível 1 (Subscriber)
        if (role === 'subscriber') {
            const premiumSections = document.querySelectorAll('.grid.md\\:grid-cols-2 .relative'); // Seleciona os cards inferiores

            premiumSections.forEach(section => {
                // Criar Overlay de Bloqueio
                const overlay = document.createElement('div');
                overlay.className = "absolute inset-0 bg-[#0A0A0A]/80 backdrop-blur-sm z-20 flex flex-col items-center justify-center text-center p-6 border border-brand-copper/30 rounded-2xl";
                overlay.innerHTML = `
                    <div class="w-12 h-12 bg-brand-copper/20 rounded-full flex items-center justify-center mb-3">
                        <svg class="w-6 h-6 text-brand-copper" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                    </div>
                    <h3 class="text-white font-bold mb-1">Recurso Exclusivo</h3>
                    <p class="text-xs text-brand-text/60 mb-4">Disponível apenas para Membros Associados.</p>
                    <a href="associe-se.html" class="px-4 py-2 bg-brand-copper text-white text-xs font-bold rounded-lg hover:bg-white hover:text-brand-copper transition-colors">
                        QUERO SER MEMBRO
                    </a>
                `;
                section.appendChild(overlay);
            });

            // Adicionar Label no Profile
            const profileArea = userEmailSpan.parentElement;
            const badge = document.createElement('span');
            badge.className = "text-[10px] bg-gray-700 text-gray-300 px-2 py-0.5 rounded ml-2 uppercase font-bold tracking-wider";
            badge.textContent = "FREE";
            profileArea.appendChild(badge);
        } else {
            // Member label
            const profileArea = userEmailSpan.parentElement;
            const badge = document.createElement('span');
            badge.className = "text-[10px] bg-brand-copper text-white px-2 py-0.5 rounded ml-2 uppercase font-bold tracking-wider";
            badge.textContent = "MEMBER";
            profileArea.appendChild(badge);
        }

        // 4. Download Handlers
        const btnDossie = document.getElementById('btn-dossie');
        const btnPlaybook = document.getElementById('btn-playbook');
        const btnRiscos = document.getElementById('btn-riscos');

        if (btnDossie) {
            btnDossie.addEventListener('click', () => DownloadManager.downloadFile('dossie_pl2338.pdf', 'Algor_Dossie_PL2338.pdf'));
        }
        if (btnPlaybook) {
            btnPlaybook.addEventListener('click', () => DownloadManager.downloadFile('playbook_governanca.pdf', 'Algor_Playbook_Governanca.pdf'));
        }
        if (btnRiscos) {
            btnRiscos.addEventListener('click', () => DownloadManager.downloadFile('mapa_riscos_iso.xlsx', 'Algor_Mapa_Riscos_ISO42001.xlsx'));
        }

        // Logout Logic
        logoutBtn.addEventListener('click', () => {
            AuthClient.logout();
        });
    </script>
</body>

</html>